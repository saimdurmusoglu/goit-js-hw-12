{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('#loader');\nconst loadMoreBtn = document.querySelector('#load-more');\nconst buttonContainer = document.querySelector('.button-container');\n\nconst API_KEY = '23458422-3da75be814240b3b99c5452e1';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 40;\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalImages = 0;\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nfunction showLoader() {\n  loader.classList.remove('loader-hidden');\n}\n\nfunction hideLoader() {\n  loader.classList.add('loader-hidden');\n}\n\nfunction showLoadMore() {\n  buttonContainer.classList.remove('hidden');\n}\n\nfunction hideLoadMore() {\n  buttonContainer.classList.add('hidden');\n}\n\nfunction showToast(message, type = 'info') {\n  const options = {\n    titleColor: '#fff',\n    iconUrl: './icon.svg',\n    iconColor: '#fff',\n    messageColor: '#fff',\n    backgroundColor: '#ef4040',\n    progressBarColor: '#b51b1b',\n    message,\n    position: 'topRight',\n    close: true,\n    timeout: 5000,\n    onOpening: (instance, toast) => {\n      const closeBtn = toast.querySelector('.iziToast-close');\n      if (closeBtn) {\n        closeBtn.innerHTML = '';\n        const customIcon = document.createElementNS(\n          'http://www.w3.org/2000/svg',\n          'svg'\n        );\n        customIcon.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n        customIcon.setAttribute('width', '20');\n        customIcon.setAttribute('height', '20');\n        customIcon.setAttribute('viewBox', '0 0 24 24');\n        customIcon.setAttribute('fill', '#fafafb');\n        customIcon.innerHTML = `\n          <path d=\"M18.3 5.71a1 1 0 0 0-1.41 0L12 10.59 7.11 5.7A1 1 0 0 0 5.7 7.11L10.59 12l-4.89 4.89a1 1 0 1 0 1.41 1.41L12 13.41l4.89 4.89a1 1 0 0 0 1.41-1.41L13.41 12l4.89-4.89a1 1 0 0 0 0-1.4z\"/>\n        `;\n        customIcon.style.cursor = 'pointer';\n        closeBtn.appendChild(customIcon);\n      }\n    },\n  };\n\n  if (type === 'error') iziToast.error({ ...options, title: 'Error' });\n  else if (type === 'warning')\n    iziToast.warning({ ...options, title: 'Warning' });\n  else iziToast.info({ ...options, title: 'Info' });\n}\n\nasync function fetchImages(query, page) {\n  const { data } = await axios.get(BASE_URL, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: PER_PAGE,\n      page,\n    },\n  });\n  return data;\n}\n\nfunction renderImages(images) {\n  const markup = images\n    .map(\n      img => `\n    <a href=\"${img.largeImageURL}\" class=\"photo-card\">\n      <img src=\"${img.webformatURL}\" alt=\"${img.tags}\" loading=\"lazy\" />\n      <div class=\"info\">\n        <p><b>Likes:</b> ${img.likes}</p>\n        <p><b>Views:</b> ${img.views}</p>\n        <p><b>Comments:</b> ${img.comments}</p>\n        <p><b>Downloads:</b> ${img.downloads}</p>\n      </div>\n    </a>\n  `\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nfunction smoothScroll() {\n  const card = document.querySelector('.gallery a');\n  if (!card) return;\n  const { height: cardHeight } = card.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n  const query = e.target.searchQuery.value.trim();\n  if (!query) return;\n\n  currentQuery = query;\n  currentPage = 1;\n  gallery.innerHTML = '';\n  hideLoadMore();\n  showLoader();\n\n  try {\n    const data = await fetchImages(currentQuery, currentPage);\n    totalImages = data.totalHits;\n\n    if (data.hits.length === 0) {\n      showToast(\n        'No images found for your query. Try something else!',\n        'warning'\n      );\n      return;\n    }\n\n    renderImages(data.hits);\n    if (totalImages > PER_PAGE) {\n      showLoadMore();\n    } else {\n      hideLoadMore();\n    }\n  } catch (err) {\n    showToast('Something went wrong while fetching data.', 'error');\n  } finally {\n    hideLoader();\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  hideLoadMore();\n  currentPage++;\n  showLoader();\n\n  try {\n    const data = await fetchImages(currentQuery, currentPage);\n    renderImages(data.hits);\n    smoothScroll();\n\n    const maxPages = Math.ceil(totalImages / PER_PAGE);\n    if (currentPage >= maxPages) {\n      showToast(\"We're sorry, but you've reached the end of search results.\");\n    } else {\n      showLoadMore();\n    }\n  } catch (err) {\n    showToast('Could not load more images.', 'error');\n  } finally {\n    hideLoader();\n  }\n});\n"],"names":["form","gallery","loader","loadMoreBtn","buttonContainer","API_KEY","BASE_URL","PER_PAGE","currentPage","currentQuery","totalImages","lightbox","SimpleLightbox","showLoader","hideLoader","showLoadMore","hideLoadMore","showToast","message","type","options","instance","toast","closeBtn","customIcon","iziToast","fetchImages","query","page","data","axios","renderImages","images","markup","img","smoothScroll","card","cardHeight","e","maxPages"],"mappings":"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"}